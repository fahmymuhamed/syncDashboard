<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Visualization with CSV Reports</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Include Chart.js -->
</head>
<body>
    <div id="fixed-column">
        <!-- Navigation Menu -->
        <h2>Navigation</h2>
        <ul>
            <li><button onclick="showSection('view-selection')">View Selection</button></li>
            <li><button onclick="showSection('node-update')">Node Data Update</button></li>
            <li><button onclick="showSection('reports')">Reports</button></li>
        </ul>

        <!-- View Selection & Node Information Section -->
        <div id="view-selection" class="section">
            <h3>View Selection</h3>
            <button class="view-button" onclick="setView('blockTypes')">Blocked Sites</button>
            <button class="view-button" onclick="setView('sowAndTech')">SOW Issuance Progress</button>

            <h3>Selected Node Information</h3>
            <p id="node-info-content">Hover over a node to see its information.</p>

            <h3>Search Node Information</h3>
            <form id="search-node-form">
                <label for="search-node">Node Name:</label>
                <input type="text" id="search-node" name="search-node" placeholder="Enter Node Name">
                <button type="submit">Search</button>
            </form>
            <div id="search-result"></div>
        </div>

        <!-- Node Update Section -->
        <div id="node-update" class="section" style="display:none;">
            <h3>Update Node Information</h3>
            <form id="update-node-form">
                <label for="node-id">Node ID:</label>
                <input type="text" id="node-id" name="node-id" placeholder="Enter Node ID" required>

                <label for="node-name">Node Name:</label>
                <input type="text" id="node-name" name="node-name" placeholder="Enter New Name" required>

                <label for="node-type">Node Type:</label>
                <input type="text" id="node-type" name="node-type" placeholder="Enter New Type">

                <button type="submit">Update Node</button>
            </form>
        </div>

        <!-- Reports Section -->
        <div id="reports" class="section" style="display:none;">
            <h3>Reports</h3>
            <label for="report-dropdown"></label><select id="report-dropdown">
                <option value="blockedByParent">Site Blocked By Parents</option>
                <option value="sowIssuedNoParent">SOW Issued No Parents</option>
                <option value="sowIssuedBlockedParent">SOW Issued with Blocked Parents</option>
                <option value="noBlockageNoInBand">No Blockage & No In-Band Report</option>
                <option value="transportPorts">Transport Ports Report</option>
            </select>
            <button id="generate-report" onclick="generateReport()">Generate Report</button>
            <button id="export-svg" onclick="exportSVG()">Export as SVG</button>
        </div>
    </div>

    <div id="main-content">
        <h1 id="main-content-title">Tree Visualization</h1>
        <div id="diagram"></div>
        <canvas id="progress-bar-chart" style="display:none; max-width: 100%;"></canvas> <!-- Bar Chart -->
        <canvas id="completion-pie-chart" style="display:none; max-width: 100%;"></canvas> <!-- Pie Chart -->
    </div>

    <script src="/js/script.js"></script>
</body>
</html>
